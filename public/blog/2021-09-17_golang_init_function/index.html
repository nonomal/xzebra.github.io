<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8">
  <title>Golang init() function</title>

  <meta name="author" content="Themefisher">
  <meta name="description" content="  This is meta description  ">

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">

  <!-- Favicon -->
  <link rel="icon" href="http://localhost:8080/images/favicon.png" type="image/x-icon">

  <!-- CSS Plugins -->
  
<link rel="preconnect" href="https://fonts.gstatic.com">











<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Mulish:wght@500;600;700;800;900&amp;display=swap">




<link rel="stylesheet" href="http://localhost:8080/css/vendor.min.2fe473cf798783edd42c5c46c6d5927b6c63c811641e63cff3dcd725db6f4e1c91e9fad9ac98acc55959f39cb21db60a8b21cd91ff7e4fdd19b899f81161f724.css" integrity="sha512-L&#43;Rzz3mHg&#43;3ULFxGxtWSe2xjyBFkHmPP89zXJdtvThyR6frZrJisxVlZ85yyHbYKiyHNkf9&#43;T90ZuJn4EWH3JA==" media="screen">

</head>

<body>
  
  <div class="header-height-fix"></div>
<header class="header-nav">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <nav class="navbar navbar-expand-lg navbar-light p-0">
          <a class="navbar-brand font-weight-bold mr-0" href="http://localhost:8080/">
            
            <img loading="lazy" src="http://localhost:8080/images/favicon.png" alt="Zebra Blog" height="35px">
            
          </a>

          
          <button class="search-toggle d-inline-block d-lg-none ml-auto mr-3" data-toggle="search" aria-label="Search Toggle">
            <i class="las la-search"></i>
          </button>
          

          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navHeader" aria-controls="navHeader" aria-expanded="false" aria-label="Toggle navigation">
            <i class="d-inline lab la-buromobelexperte"></i>
            <i class="d-none las la-times"></i>
          </button>

          <div class="collapse navbar-collapse" id="navHeader">
            <ul class="navbar-nav mx-auto">

              
              
              
              
              
              <li class="nav-item ">
                <a class="nav-link" href="http://localhost:8080/">Home</a>
              </li>
              
              
              
              
              
              <li class="nav-item ">
                <a class="nav-link" href="http://localhost:8080/about/">About</a>
              </li>
              
              
              
              
              
              <li class="nav-item ">
                <a class="nav-link" href="http://localhost:8080/categories/">Categories</a>
              </li>
              
              
              
              
              
              <li class="nav-item ">
                <a class="nav-link" href="http://localhost:8080/tags/">Tags</a>
              </li>
              
              
            </ul>
            
            
            <div class="navbar-right d-none d-lg-inline-block">
              <ul class="social-links list-unstyled list-inline">
                <li class="list-inline-item ml-4 d-none d-lg-inline-block">
                  <button class="search-toggle" data-toggle="search" aria-label="Search Toggle">
                    <i class="las la-search"></i>
                  </button>
                </li>
              </ul>
            </div>
            
          </div>
        </nav>
      </div>
    </div>
  </div>
</header>


<div class="search-block">
  <div data-toggle="search-close">
    <i class="las la-times text-primary"></i>
  </div>
  <form action="/search">
    <input id="search-query" name="s" type="search" placeholder="Type words &amp; hit enter" class="text-center" aria-label="search-query">
  </form>
</div>

  
  




<section class="section-sm">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <div class="text-center mb-5">
          <h3 class="h2 mb-4 post-title">Golang init() function</h3>
          <ul class="card-meta list-inline">
            <li class="list-inline-item">
              <a href="#!" class="card-meta-author">
                
                <a href="http://localhost:8080/author/zebra/" class="card-meta-author">
                  <img loading="lazy" src="http://localhost:8080/images/author/zebra.png" alt="Zebra">
                  <span>Zebra</span>
                </a>
                
              </a>
            </li>
            <li class="list-inline-item">|</li>
            <li class="list-inline-item">
              <span>17 September 2021</span>
            </li>
          </ul>
        </div>

        
        <div class="mb-5 text-center">
          <img loading="lazy" class="img-fluid rounded" src="http://localhost:8080/images/posts/i.imgur.com_z111iEy.png" alt="Image not Found">
        </div>
        

        <div class="content">
          <p>This post is about the init function in golang and how it can be used for package initialization, avoiding filling the main function with initialization for each packet.</p>
<h1 id="background">Background</h1>
<p>The necessity to initialize a packet before main function comes when trying to reduce the number of queries to zworld&rsquo;s items database.</p>
<p>This database contains the information for all the items in the game, so it is easier to check, update and share the information t both the client and server.</p>
<p>When implementing chicken nest block&rsquo;s interaction, we had to:</p>
<ul>
<li>check if it was really that block</li>
<li>change it to the empty version (without eggs)</li>
<li>give the player the eggs collected</li>
</ul>
<p>That means on every nest interaction, three queries will be performed.</p>
<p>It seems like it is just a few. But the current implementation of the find item from id name (&ldquo;chicken_nest_eggs&rdquo;, &hellip;) is O(n) in the number of items, checking id by id comparing strings, so probably worse. This means a very bad performance when the items database grows.</p>
<h1 id="proposed-solution">Proposed Solution</h1>
<p>We couldn&rsquo;t just create some globals, as the package initialization was being done in the main function, resulting in nil data when initializing the globals.</p>
<p>This is when Go&rsquo;s init function comes handy. This function allows you to run code the first time the package is initialized. The order of this initialization is in import order, following recursively imports first. And, after all, the main function will be executed.</p>
<p>By initializing the items database package on the init function, we can allow any package importing the items database package to initialize globals, as the database will be already initialized.</p>
<p>It is a very handy (and unique, as most languages don&rsquo;t have it) function and not so widely known.</p>

        </div>
      </div>
    </div>

    <div class="single-post-meta">
      <div class="row justify-content-center">
        <div class="col-lg-5 col-md-6 text-center text-md-left">
          <ul class="post-meta-tags list-unstyled list-inline">
            
          </ul>
        </div>
        <div class="col-lg-5 col-md-6 text-center text-md-right mt-4 mt-md-0">
<ul class="social-links has-bg-color list-unstyled list-inline" style="line-height:0">
  <li class="list-inline-item">
    
    <a class="resp-sharing-button__link d-block" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a8080%2fblog%2f2021-09-17_golang_init_function%2f" target="_blank"
      rel="noopener" aria-label="">
      <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <i class="lab la-facebook-f text-dark"></i>
        </div>
      </div>
    </a>
  </li>

  <li class="list-inline-item">
    
    <a class="resp-sharing-button__link d-block" href="https://twitter.com/intent/tweet/?text=Golang%20init%28%29%20function&amp;url=http%3a%2f%2flocalhost%3a8080%2fblog%2f2021-09-17_golang_init_function%2f"
      target="_blank" rel="noopener" aria-label="">
      <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <i class="lab la-twitter text-dark"></i>
        </div>
      </div>
    </a>
  </li>

  <li class="list-inline-item">
    
    <a class="resp-sharing-button__link d-block" href="https://plus.google.com/share?url=http%3a%2f%2flocalhost%3a8080%2fblog%2f2021-09-17_golang_init_function%2f" target="_blank"
      rel="noopener" aria-label="">
      <div class="resp-sharing-button resp-sharing-button--google resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <i class="lab la-google-plus-g text-dark"></i>
        </div>
      </div>
    </a>
  </li>

  <li class="list-inline-item">
    
    <a class="resp-sharing-button__link d-block" href="mailto:?subject=Golang%20init%28%29%20function&amp;body=http%3a%2f%2flocalhost%3a8080%2fblog%2f2021-09-17_golang_init_function%2f" target="_self"
      rel="noopener" aria-label="">
      <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <i class="las la-envelope text-dark"></i>
        </div>
      </div>
    </a>
  </li>

  <li class="list-inline-item">
    
    <a class="resp-sharing-button__link d-block" href="whatsapp://send?text=Golang%20init%28%29%20function%20http%3a%2f%2flocalhost%3a8080%2fblog%2f2021-09-17_golang_init_function%2f" target="_blank"
      rel="noopener" aria-label="">
      <div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <i class="lab la-whatsapp text-dark"></i>
        </div>
      </div>
    </a>
  </li>

</ul></div>
      </div>
    </div>

    <div class="single-post-author">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <div class="media d-block d-sm-flex text-center text-sm-left">
            
            <a href="http://localhost:8080/author/zebra/"><img loading="lazy" class="img-fluid rounded-circle mr-0 mr-sm-4 mb-4" src="http://localhost:8080/images/author/zebra.png" alt="Zebra"></a>
            <div class="media-body">
              <p class="font-primary mb-1">Written By</p>
              <h4><a href="http://localhost:8080/author/zebra/" class="text-dark font-weight-700">Zebra</a></h4>
              <p class="font-primary">Student of Computer Science at University of Zaragoza (🇪🇸). Cybersecurity enthusiast. Golang developer. Cat lover.</p>
              <ul class="social-links list-unstyled list-inline ml-0 ml-sm-n2">
                
                <li class="list-inline-item"><a href="https://www.github.com/xzebra">
                    <i class="lab lab la-github"></i>
                  </a></li>
                
                <li class="list-inline-item"><a href="https://app.hackthebox.eu/users/680488">
                    <i class="lab las la-cube"></i>
                  </a></li>
                
                <li class="list-inline-item"><a href="https://www.linkedin.com/in/jorge-romanos-a97174161/">
                    <i class="lab lab la-linkedin-in"></i>
                  </a></li>
                
              </ul>
            </div>
            
          </div>
        </div>
      </div>
    </div>

    <div class="single-post-similer">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <div class="row mt-3">
            <div class="col-12">
              <h3 class="text-dark font-weight-800 mb-4 pb-2">You May Also Like</h3>
            </div>
            
              
            <div class="col-md-6">
              <article class="card post-card">
  
  <a href="http://localhost:8080/blog/2021-09-27_lighting_system/">
    <img loading="lazy" class="w-100 rounded" src="http://localhost:8080/images/posts/i.imgur.com_2OprBJL.png" alt="Lighting system">
  </a>
  
  <div class="card-body">
    <ul class="card-meta list-inline mb-2">
      <li class="list-inline-item mb-2">
        
        <a href="http://localhost:8080/author/zebra/" class="card-meta-author">
          
          <img loading="lazy" src="http://localhost:8080/images/author/zebra.png" alt="Zebra">
          
          <span>Zebra</span>
        </a>
        
      </li>
      <li class="list-inline-item mb-2">
        <span>27 Sep, 2021</span>
      </li>
      <li class="list-inline-item mb-2">
        <ul class="card-meta-tag list-inline">
          
          <li class="list-inline-item"><a href="http://localhost:8080/tags/lights">lights</a></li>
          
          <li class="list-inline-item"><a href="http://localhost:8080/tags/visual">visual</a></li>
          
        </ul>
      </li>
    </ul>
    <h3 class="mb-3">
      <a class="post-title" href="http://localhost:8080/blog/2021-09-27_lighting_system/">Lighting system</a>
    </h3>
    <p>Lighting gives games a more professional look. I wanted to introduce a simple lighting system to light blocks and entities. The lighting ideas are …</p>

    
  </div>
</article>
            </div>
            
            <div class="col-md-6">
              <article class="card post-card">
  
  <a href="http://localhost:8080/blog/2021-09-05_client_authentication/">
    <img loading="lazy" class="w-100 rounded" src="http://localhost:8080/images/posts/i.imgur.com_zI8WrkR.png" alt="Client authentication">
  </a>
  
  <div class="card-body">
    <ul class="card-meta list-inline mb-2">
      <li class="list-inline-item mb-2">
        
        <a href="http://localhost:8080/author/zebra/" class="card-meta-author">
          
          <img loading="lazy" src="http://localhost:8080/images/author/zebra.png" alt="Zebra">
          
          <span>Zebra</span>
        </a>
        
      </li>
      <li class="list-inline-item mb-2">
        <span>05 Sep, 2021</span>
      </li>
      <li class="list-inline-item mb-2">
        <ul class="card-meta-tag list-inline">
          
        </ul>
      </li>
    </ul>
    <h3 class="mb-3">
      <a class="post-title" href="http://localhost:8080/blog/2021-09-05_client_authentication/">Client authentication</a>
    </h3>
    <p>Client-server encryption and authentication based on Minecraft server.
Protocol C: client
S: server
C → S: Login request Client requests the login …</p>

    
  </div>
</article>
            </div>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</section>




  <footer class="pt-4 pb-5">
  <div class="container">
    <div class="row justify-content-center align-items-center">
      <div class="col-lg-5">
        
        
        
      </div>
      
      <div class="col-lg-12 text-center ">
      
        <ul class="list-inline footer-menu mb-4">
          
        </ul>
        <ul class="social-links icon-box list-unstyled list-inline font-weight-500 mb-3">
          
        </ul>
        
        <p class="mb-0 font-weight-500 copyright-text content">Made with ❤ by <a href="https://github.com/xzebra">Zebra</a></p>
        
      </div>
    </div>
  </div>
</footer>

  




  



  



  



  



  



  




<script data-turbolinks-suppress-warning src="/js/vendor.min.104c16bb588dd60f4bc0cbb9828dcf214eb0a6775f69f74f025b75dc5aac73eb47da26aef00c8f4e3d7a85099a8054c195d03d63aa88d1b4213a47274755994e.js" integrity="sha512-EEwWu1iN1g9LwMu5go3PIU6wpndfafdPAlt13Fqsc&#43;tH2iau8AyPTj16hQmagFTBldA9Y6qI0bQhOkcnR1WZTg=="></script>



</body>

</html>